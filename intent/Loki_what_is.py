#!/usr/bin/env python3
# -*- coding:utf-8 -*-

"""
    Loki module for what_is

    Input:
        inputSTR      str,
        utterance     str,
        args          str[],
        resultDICT    dict

    Output:
        resultDICT    dict
"""

DEBUG_what_is = True
userDefinedDICT = {"2302": ["麗正", "2302"], "2303": ["聯電", "2303"], "2329": ["華泰", "2329"], "2330": ["台積電", "2330"], "2337": ["旺宏", "2337"], "2338": ["光罩", "2338"], "2342": ["茂矽", "2342"], "2344": ["華邦電", "2344"], "2351": ["順德", "2351"], "2363": ["矽統", "2363"], "2369": ["菱生", "2369"], "2379": ["瑞昱", "2379"], "2388": ["威盛", "2388"], "2401": ["凌陽", "2401"], "2408": ["南亞科", "2408"], "2434": ["統懋", "2434"], "2436": ["偉詮電", "2436"], "2441": ["超豐", "2441"], "2449": ["京元電子", "京元", "2449"], "2451": ["創見", "2451"], "2454": ["聯發科", "2454"], "2458": ["義隆", "2458"], "3006": ["晶豪科", "3006"], "3014": ["聯陽", "3014"], "3016": ["家晶", "3016"], "3034": ["聯詠", "3034"], "3041": ["揚智", "3041"], "3054": ["立萬利", "3054"], "3094": ["聯傑", "3094"], "3189": ["景碩", "3189"], "3257": ["虹冠電", "3257"], "3413": ["京鼎", "3413"], "3443": ["創意", "3443"], "3450": ["聯鈞", "3450"], "3530": ["晶相光", "3530"], "3532": ["台勝科", "3532"], "3536": ["誠創", "3536"], "3545": ["敦泰", "3545"], "3583": ["辛耕", "3583"], "3588": ["通嘉", "3588"], "3661": ["世芯-KY", "3661"], "3686": ["達能", "3686"], "3711": ["日月光投控", "3711"], "4919": ["新唐", "4919"], "4952": ["凌通", "4952"], "4961": ["天銓", "4961"], "4967": ["十銓", "4967"], "4968": ["立積", "4968"], "5269": ["祥碩", "5269"], "5285": ["界霖", "5285"], "5471": ["松翰", "5471"], "6202": ["盛群", "6202"], "6239": ["力成", "6239"], "6243": ["迅杰", "6243"], "6257": ["矽格", "6257"], "6271": ["同欣電", "6271"], "6415": ["矽力-KY", "矽力", "6415"], "6451": ["訊芯-KY", "訊芯", "6451"], "6515": ["穎崴", "6515"], "6525": ["捷敏-KY", "捷敏", "6525"], "6531": ["愛普", "6531"], "6533": ["晶心科", "6533"], "6552": ["易華電", "6552"], "6573": ["虹揚-KY", "6573"], "6756": ["威鋒電子", "6756"], "8016": ["矽創", "8016"], "8028": ["昇陽半導體電子", "8028"], "8081": ["致心", "8081"], "8110": ["華東", "8110"], "8131": ["福懋科", "8131"], "8150": ["南茂", "8150"], "8261": ["富鼎", "8261"], "8271": ["宇瞻", "8271"], "安全性": [""], "成交價": [""], "成長力": [""], "成長率": ["YOY", "yoy"], "流動比": ["流動比率"], "負債比": [""], "速動比": [""], "基本資料": ["資料", "資訊", "基本資料", "基本資訊"], "年成長率": [""], "每股盈餘": [""], "營業利益": [""], "營業收入": ["營收", "營業收入"], "稅後淨利": [""], "財務報表": ["財務報表", "財報", "財報資料", "基本財報資料"], "存貨周轉率": [""], "安全性分析": [""], "安全性指標": [""], "昨日收盤價": ["昨收", "昨日收盤價"], "流速動比率": [""], "現金流量比": [""], "利息保障倍數": [""], "營運周轉能力": [""], "資產年成長率": [""], "應收帳款週轉率": [""], "每股盈餘成長率": [""], "股東權益報酬率": [""]}

# 將符合句型的參數列表印出。這是 debug 或是開發用的。
def debugInfo(inputSTR, utterance):
    if DEBUG_what_is:
        print("[what_is] {} ===> {}".format(inputSTR, utterance))

def getResult(inputSTR, utterance, args, resultDICT):
    debugInfo(inputSTR, utterance)
    if utterance == "[償債能力]是什麼":
        if args[0] == "償債能力":
            resultDICT["reply"] = "償債能力分析包括短期償債能力和長期償債能力分析。短期償債能力是企業即時足額償還流動負債的保證程度，其主要指標有流動比率和速動比率，這些比率越高表示企業短期償債能力越高，另長期償債能力則可透過利息保障倍數比率分析之。"
        elif args[0] in ("流動比","流動比率"):
            resultDICT["reply"] = "流動比率是用來分析一家公司流動負債由流動資產償還的比率，公司流動比率愈高，表示該公司短期償債能力的強度越強，對該公司短期債權人越有保障，但若該比率過高時，也顯示該公司資金未能有效運用。"
        elif args[0] in ("速動比","速動比率"):
            resultDICT["reply"] = "速動比率是用來分析一家公司流動負債由不含存貨及預付費用的流動資產償還的比率，因流動資產中以存貨、預付費用的變現性較差，恐無法在短時間內快速變現，故速動比率係將流動資產中的此二項資產扣除，留現金、有價證券、應收帳款及票據等具較高變現性的流動資產來償還流動負債，計算該公司短期的償債能力，通常速動比率以100%適當。"
        elif args[0] == "利息保障倍數":
            resultDICT["reply"] = "利息保障倍數主要是在分析一家公司以營業活動所產生的盈餘用來支付利息費用的能力，該倍數越高，表示該公司以營業活動獲利支付借款利息的能力越強。"
        elif args[0] == "獲利能力":
            resultDICT["reply"] = "公司的獲利能力決定企業能否繼續生存，亦即代表公司能否創造足夠的報酬，以吸引投資人投入資金繼續經營。投資人於進行獲利能力分析時，可觀察公司的資產報酬率、股東權益報酬率、純益率、每股盈餘等數據，該等數字愈高時，代表公司的獲利能力愈好。"
        elif args[0] == "資產報酬率":
            resultDICT["reply"]="資產報酬率是用來分析公司資產投入營運產生盈餘的報酬比率，資產報酬率越高表示該公司運用資產並使其產生獲利的能力越強，另通常此比率無一定的高低，需同業間作比較才能判斷該公司資產應用的好壞，但此比率不宜低於一般市場的利率標準，不然就表示該公司承擔風險投資的效果比無風險性的報酬還低，表示資產運用不當。"
        elif args[0] == "股東權益報酬率":
            resultDICT["reply"]="股東權益報酬率是用來分析股東投資公司所能獲得的報酬比率，原則上，此比率越大，股東投資公司所獲得的利潤就越高。"
        elif args[0] == "純益率":
            resultDICT["reply"]="純益率是分析公司營收產生淨利﹝損﹞的能力，可瞭解公司獲利能力及成本費用控制績效，純益率越高表示公司獲利能力越強，成本費用控制得宜。"
        elif args[0] in ("普通股每股盈餘","EPS","eps","每股盈餘"):
            resultDICT["reply"]="普通股每股盈餘係分析公司的普通股每股可賺得的盈餘，不同年度的每股盈餘可看出該公司普通股每股的獲利趨勢，但每股盈餘不見得就是投資人可獲配之股利，因公司有時會將部分盈餘予以保留，作未來投資之用。 "
        else:
            resultDICT["reply"] = "抱歉，這個超過我的能力範圍了！"
            
        

    if utterance == "什麼是[償債能力]":
        if args[0] == "償債能力":
            resultDICT["reply"] = "償債能力分析包括短期償債能力和長期償債能力分析。短期償債能力是企業即時足額償還流動負債的保證程度，其主要指標有流動比率和速動比率，這些比率越高表示企業短期償債能力越高，另長期償債能力則可透過利息保障倍數比率分析之。"
        elif args[0] in ("流動比","流動比率"):
            resultDICT["reply"] = "流動比率是用來分析一家公司流動負債由流動資產償還的比率，公司流動比率愈高，表示該公司短期償債能力的強度越強，對該公司短期債權人越有保障，但若該比率過高時，也顯示該公司資金未能有效運用。"
        elif args[0] in ("速動比","速動比率"):
            resultDICT["reply"] = "速動比率是用來分析一家公司流動負債由不含存貨及預付費用的流動資產償還的比率，因流動資產中以存貨、預付費用的變現性較差，恐無法在短時間內快速變現，故速動比率係將流動資產中的此二項資產扣除，留現金、有價證券、應收帳款及票據等具較高變現性的流動資產來償還流動負債，計算該公司短期的償債能力，通常速動比率以100%適當。"
        elif args[0] == "利息保障倍數":
            resultDICT["reply"] = "利息保障倍數主要是在分析一家公司以營業活動所產生的盈餘用來支付利息費用的能力，該倍數越高，表示該公司以營業活動獲利支付借款利息的能力越強。"
        elif args[0] == "獲利能力":
            resultDICT["reply"] = "公司的獲利能力決定企業能否繼續生存，亦即代表公司能否創造足夠的報酬，以吸引投資人投入資金繼續經營。投資人於進行獲利能力分析時，可觀察公司的資產報酬率、股東權益報酬率、純益率、每股盈餘等數據，該等數字愈高時，代表公司的獲利能力愈好。"
        elif args[0] == "資產報酬率":
            "資產報酬率是用來分析公司資產投入營運產生盈餘的報酬比率，資產報酬率越高表示該公司運用資產並使其產生獲利的能力越強，另通常此比率無一定的高低，需同業間作比較才能判斷該公司資產應        用的好壞，但此比率不宜低於一般市場的利率標準，不然就表示該公司承擔風險投資的效果比無風險性的報酬還低，表示資產運用不當。"
        elif args[0] == "股東權益報酬率":
            "股東權益報酬率是用來分析股東投資公司所能獲得的報酬比率，原則上，此比率越大，股東投資公司所獲得的利潤就越高。"
        elif args[0] == "純益率":
            "純益率是分析公司營收產生淨利﹝損﹞的能力，可瞭解公司獲利能力及成本費用控制績效，純益率越高表示公司獲利能力越強，成本費用控制得宜。"
        elif args[0] == "普通股每股盈餘":
            "普通股每股盈餘係分析公司的普通股每股可賺得的盈餘，不同年度的每股盈餘可看出該公司普通股每股的獲利趨勢，但每股盈餘不見得就是投資人可獲配之股利，因公司有時會將部分盈餘予以保留，作未來投資之用。 "
        else:
            resultDICT["reply"] = "抱歉，這個過我的能力範圍了！"

    return resultDICT